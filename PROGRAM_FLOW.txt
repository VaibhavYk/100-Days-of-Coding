╔════════════════════════════════════════════════════════════════════════════╗
║                    NETWORK UTILITY - PROGRAM FLOW                          ║
╚════════════════════════════════════════════════════════════════════════════╝


OVERALL PROGRAM STRUCTURE:
==========================

┌─────────────────────────────────────────────────────────────────────────┐
│                           PROGRAM START                                  │
│                                 │                                        │
│                                 ▼                                        │
│                    ┌────────────────────────┐                           │
│                    │  Initialize Winsock    │                           │
│                    │  (Windows Socket API)  │                           │
│                    └────────────────────────┘                           │
│                                 │                                        │
│                                 ▼                                        │
│                    ┌────────────────────────┐                           │
│                    │   Display Welcome      │                           │
│                    │   Message              │                           │
│                    └────────────────────────┘                           │
│                                 │                                        │
│                                 ▼                                        │
│                    ┌────────────────────────┐                           │
│                    │   Main Menu Loop       │◄─────────┐               │
│                    │   (Infinite Loop)      │          │               │
│                    └────────────────────────┘          │               │
│                                 │                       │               │
│                                 ▼                       │               │
│                    ┌────────────────────────┐          │               │
│                    │   Display Menu         │          │               │
│                    │   Options 0-5          │          │               │
│                    └────────────────────────┘          │               │
│                                 │                       │               │
│                                 ▼                       │               │
│                    ┌────────────────────────┐          │               │
│                    │   Get User Choice      │          │               │
│                    └────────────────────────┘          │               │
│                                 │                       │               │
│                                 ▼                       │               │
│              ┌──────────────────┴──────────────────┐   │               │
│              │                                      │   │               │
│    ┌─────────▼─────────┐              ┌───────────▼───▼──────┐        │
│    │   Option 1-5      │              │   Option 0           │        │
│    │   Execute         │              │   Exit Program       │        │
│    │   Function        │              └──────────────────────┘        │
│    └─────────┬─────────┘                          │                   │
│              │                                     ▼                   │
│              │                        ┌────────────────────────┐      │
│              │                        │   Cleanup Winsock      │      │
│              │                        └────────────────────────┘      │
│              │                                     │                   │
│              │                                     ▼                   │
│              │                        ┌────────────────────────┐      │
│              │                        │   PROGRAM END          │      │
│              │                        └────────────────────────┘      │
│              │                                                         │
│              └─────────────────────────────────────────────────────────┤
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘


MENU OPTIONS FLOW:
==================

Option 1: Show Public IP Address
─────────────────────────────────
    ┌─────────────────────────┐
    │   getPublicIP()         │
    └───────────┬─────────────┘
                │
                ▼
    ┌─────────────────────────┐
    │ Build curl command      │
    │ "curl -s api.ipify.org" │
    └───────────┬─────────────┘
                │
                ▼
    ┌─────────────────────────┐
    │ Execute command         │
    │ using popen()           │
    └───────────┬─────────────┘
                │
                ▼
    ┌─────────────────────────┐
    │ Read output (IP)        │
    │ using fgets()           │
    └───────────┬─────────────┘
                │
                ▼
    ┌─────────────────────────┐
    │ Display IP to user      │
    └─────────────────────────┘


Option 2: Show Local IP Address
────────────────────────────────
    ┌─────────────────────────────────┐
    │   getLocalIP()                  │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Allocate memory for             │
    │ adapter information             │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Call GetAdaptersAddresses()     │
    │ (Windows IP Helper API)         │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Loop through all adapters       │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Filter: Active adapters only    │
    │ Skip: Loopback (127.0.0.1)      │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Extract IPv4 addresses          │
    │ using inet_ntop()               │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Display adapter name and IP     │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Free allocated memory           │
    └─────────────────────────────────┘


Option 3: Ping a Website
─────────────────────────
    ┌─────────────────────────────────┐
    │   pingWebsite(hostname)         │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Get hostname from user          │
    │ (e.g., "google.com")            │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Build ping command              │
    │ Windows: "ping -n 4 hostname"   │
    │ Linux:   "ping -c 4 hostname"   │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Execute command using popen()   │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Read output line by line        │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Filter relevant lines:          │
    │ - Reply messages                │
    │ - Time statistics               │
    │ - Average latency               │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Display results to user         │
    └─────────────────────────────────┘


Option 4: Test Internet Speed
──────────────────────────────
    ┌─────────────────────────────────┐
    │   testInternetSpeed()           │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Build curl command with timing  │
    │ Download 1MB test file          │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Execute download using curl     │
    │ Measure time and speed          │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Parse curl output:              │
    │ - Total time                    │
    │ - Average speed (bytes/sec)     │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Convert to Mbps:                │
    │ (bytes/sec * 8) / (1024*1024)   │
    └───────────┬─────────────────────┘
                │
                ▼
    ┌─────────────────────────────────┐
    │ Display speed to user           │
    └─────────────────────────────────┘


Option 5: Run All Tests
────────────────────────
    ┌─────────────────────────────────┐
    │   Execute all functions         │
    └───────────┬─────────────────────┘
                │
                ├──► getPublicIP()
                │
                ├──► getLocalIP()
                │
                ├──► pingWebsite("google.com")
                │
                └──► testInternetSpeed()


FUNCTION CALL HIERARCHY:
========================

main()
│
├─► displayMenu()
│   └─► printf() - Display menu options
│
├─► getPublicIP()
│   ├─► sprintf() - Build command
│   ├─► popen() - Execute curl
│   ├─► fgets() - Read output
│   ├─► strcspn() - Remove newline
│   └─► pclose() - Close pipe
│
├─► getLocalIP()
│   ├─► malloc() - Allocate memory
│   ├─► GetAdaptersAddresses() - Windows API
│   ├─► inet_ntop() - Convert IP to string
│   └─► free() - Free memory
│
├─► pingWebsite()
│   ├─► sprintf() - Build command
│   ├─► popen() - Execute ping
│   ├─► fgets() - Read output
│   ├─► strstr() - Filter lines
│   └─► pclose() - Close pipe
│
├─► testInternetSpeed()
│   ├─► sprintf() - Build command
│   ├─► popen() - Execute curl
│   ├─► fgets() - Read output
│   ├─► sscanf() - Parse speed
│   └─► pclose() - Close pipe
│
└─► clearInputBuffer()
    └─► getchar() - Clear stdin


DATA FLOW DIAGRAM:
==================

User Input ──► scanf() ──► Switch Statement ──► Function Call
                                                      │
                                                      ▼
                                            ┌─────────────────┐
                                            │  System Command │
                                            │  or Windows API │
                                            └────────┬────────┘
                                                     │
                                                     ▼
                                            ┌─────────────────┐
                                            │  Process Data   │
                                            └────────┬────────┘
                                                     │
                                                     ▼
                                            ┌─────────────────┐
                                            │  Display Result │
                                            └────────┬────────┘
                                                     │
                                                     ▼
                                            Back to Main Menu


KEY SYSTEM INTERACTIONS:
=========================

┌──────────────────┐         ┌──────────────────┐
│  Network Utility │────────►│   Winsock2 API   │
│    Program       │         │  (Socket Layer)  │
└──────────────────┘         └──────────────────┘
         │                            │
         │                            ▼
         │                   ┌──────────────────┐
         │                   │  Network Stack   │
         │                   └──────────────────┘
         │
         ├──────────────────►┌──────────────────┐
         │                   │  IP Helper API   │
         │                   │ (Adapter Info)   │
         │                   └──────────────────┘
         │
         └──────────────────►┌──────────────────┐
                             │  System Commands │
                             │  (curl, ping)    │
                             └──────────────────┘


ERROR HANDLING FLOW:
====================

Function Call
     │
     ▼
Check Return Value
     │
     ├─► Success? ──► Continue
     │
     └─► Failure? ──► Display Error Message
                      │
                      ├─► Suggest Solution
                      │
                      └─► Return to Menu


MEMORY MANAGEMENT:
==================

Allocate Memory (malloc)
     │
     ▼
Use Memory
     │
     ▼
Check for Errors
     │
     ▼
Free Memory (free)
     │
     ▼
Set Pointer to NULL


COMPILATION FLOW:
=================

Source Code (network_utility.c)
     │
     ▼
Preprocessor (#ifdef, #include)
     │
     ▼
Compiler (gcc or cl)
     │
     ├─► Compile to object code
     │
     └─► Link libraries (ws2_32, iphlpapi)
         │
         ▼
    Executable (network_utility.exe)


═══════════════════════════════════════════════════════════════════════════

This diagram shows how the program flows from start to finish, how functions
call each other, and how data moves through the system.

For detailed code explanation, see CODE_EXPLANATION.md
For usage instructions, see README_NETWORK_UTILITY.md

═══════════════════════════════════════════════════════════════════════════
